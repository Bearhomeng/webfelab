<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<canvas id="mySmile2" width="200" height="200"></canvas>
</body>
<script>
    window.onload = function () {



        window.addEventListener("popstate", drawStack, false);
        var drawStack = function () {
            console.log('drawStack');
            switch (window.history.state) {
                case 'leftEye':
                    makeLeftEye();
                    break;
                case 'rightEye':
                    makeRightEye();
                    break;
                case 'mouth':
                    makeMouth();
                    break;
                case 'face':
                    makeface();
                    break;
                default:
                    break;
            }
        };
        var mySmile = document.getElementById('mySmile2');
        var smileCtx = mySmile.getContext('2d');


        var makeface = function () {
            console.log('makeface');
            smileCtx.beginPath();
            smileCtx.fillStyle = "#F1F42E";
            smileCtx.arc(100, 100, 99, 0, Math.PI * 2);
            smileCtx.stroke();
            smileCtx.fill();
        };

        var makeMouth = function () {
            console.log('makeMouth');
            smileCtx.beginPath();
            smileCtx.moveTo(170, 100);
            smileCtx.arc(100, 100, 70, 0, Math.PI);
            smileCtx.stroke();
        };

        var makeLeftEye = function () {
            console.log('makeLeftEye');
            smileCtx.beginPath();
            smileCtx.fillStyle = 'black';
            smileCtx.moveTo(60, 65);
            smileCtx.arc(60, 65, 12, 0, Math.PI * 2);
            smileCtx.fill();
        };

        var makeRightEye = function () {
            console.log('makeRightEye');
            smileCtx.beginPath();
            smileCtx.fillStyle = 'black';
            smileCtx.moveTo(140, 65);
            smileCtx.arc(140, 65, 12, 0, Math.PI * 2);
            smileCtx.fill();
        };
        makeface();
        makeMouth();
        makeLeftEye();
        makeRightEye();
        window.history.pushState('leftEye', 'makeLeftEye'); //
        window.history.pushState('rightEye', 'makeRightEye');
        window.history.pushState('mouth', 'makeMouth');
        window.history.pushState('face', 'makeface');
        window.history.pushState('ready', 'letsgo');
        console.log(window.history.length);
        console.log(window.history.state);
    };
</script>
</html>